learning and making decisions when costs and probabilities are both unknown in many data mining domains , misclassification costs are different for different examples , in the same way that class membership probabilities are example-dependent . in these domains , both costs and probabilities are unknown for test examples , so both cost estimators and probability estimators must be learned . after discussing how to make optimal decisions given cost and probability estimates , we present decision tree and naive bayesian learning methods for obtaining well-calibrated probability estimates . we then explain how to obtain unbiased estimators for example-dependent costs , taking into account the difficulty that in general , probabilities and costs are not independent random variables , and the training examples for which costs are known are not representative of all examples . the latter problem is called sample selection bias in econometrics . our solution to it is based on nobel prize-winning work due to the economist james heckman . we show that the methods we propose perform better than metacost and all other known methods , in a comprehensive experimental comparison that uses the well-known , large , and challenging dataset from the kdd '98 data mining contest .